<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>مؤسسة عبر الأوطان</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --logo-blue-primary: #2D8CFF;
      --logo-blue-secondary: #00A2FF;
      --logo-orange-primary: #FF8C00;
      --logo-yellow-accent: #FFD700;
      --logo-purple-hint: #5A00E0; 

      --text-light: #FFFFFF;
      --text-dark-subtle: #E0E0E0; 
      
      --dark-gradient-start: #0f172a; 
      --dark-gradient-end: #1e293b;   

      --section-overlay: linear-gradient(135deg, rgba(15, 23, 42, 0.92), rgba(25, 33, 52, 0.88)); 
      
      --nav-gradient: linear-gradient(100deg, var(--logo-blue-primary), var(--logo-blue-secondary));
      --button-accent-gradient: linear-gradient(45deg, var(--logo-orange-primary), var(--logo-yellow-accent));
      --footer-gradient: linear-gradient(90deg, var(--dark-gradient-start), var(--dark-gradient-end));
      --card-bg: rgba(255, 255, 255, 0.08); 
      --card-border-hover: linear-gradient(to right, var(--logo-blue-secondary), var(--logo-orange-primary));
    }

    body {
      margin: 0;
      font-family: 'Cairo', sans-serif;
      scroll-behavior: smooth;
      background-image: url('ded72db05a03ef76668e7b66e565bd5d.jpg');
      background-size: cover;
      background-attachment: fixed;
      background-position: center;
      background-repeat: no-repeat;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      color: var(--text-light); 
    }

    nav {
      position: fixed;
      top: 0;
      width: 100%;
      background: var(--nav-gradient);
      color: var(--text-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 5px 20px;
      box-sizing: border-box;
      z-index: 999;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    #nav-logo-img {
        height: 40px;
        width: auto;
    }
    nav ul {
      list-style: none;
      display: flex;
      gap: 5px; 
      margin: 0;
      padding: 0;
    }
    nav a {
      color: var(--text-light);
      text-decoration: none;
      font-weight: bold;
      padding: 10px 12px; 
      border-radius: 4px;
      transition: background-color 0.3s ease, color 0.3s ease;
      position: relative; 
    }
    nav a::after { 
        content: '';
        position: absolute;
        width: 0;
        height: 2px;
        bottom: 5px; 
        left: 50%;
        transform: translateX(-50%);
        background-color: var(--logo-orange-primary);
        transition: width 0.3s ease;
    }
    nav a:hover::after {
        width: 70%; 
    }
    nav a:hover {
        color: var(--logo-yellow-accent); 
    }

    #language-switcher {
      position: fixed;
      left: 10px;
      bottom: 10px;
      background: var(--button-accent-gradient);
      color: var(--text-light);
      border: none;
      padding: 8px 12px; 
      font-weight: bold;
      border-radius: 6px; 
      cursor: pointer;
      box-sizing: border-box;
      z-index: 1000;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    #language-switcher:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    main {
      flex-grow: 1;
      width: 100%;
    }

    section {
      background: var(--section-overlay);
      min-height: 100vh; 
      height: auto; 
      padding: 100px 20px 40px; 
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: var(--text-light);
      width: 100%;
      border-bottom: 1px solid rgba(255,255,255,0.1); 
    }
     section:last-of-type {
        border-bottom: none; 
    }
    
    section#home { /* Ensure home section is a positioning context */
        position: relative;
    }

    #home h1#home-title { 
      font-size: 3.2em; 
      font-weight: 700;
      color: var(--logo-yellow-accent); 
      background: none;
      -webkit-background-clip: initial;
      -webkit-text-fill-color: initial;
      padding: 10px 20px;
      text-shadow: 
        0 0 5px rgba(255,255,255,0.8), 
        0 0 10px var(--logo-yellow-accent), 
        0 0 20px var(--logo-yellow-accent), 
        0 0 30px var(--logo-orange-primary),
        0 0 40px var(--logo-orange-primary);
      margin-bottom: 15px;
    }

    #home p#home-desc { 
        font-size: 1.3em;
        color: var(--text-dark-subtle);
        margin-bottom: 20px; 
    }

    .hero-gif { 
        max-width: 90%;
        width: 525px; /* Changed from 350px to 525px */
        height: auto;
        border-radius: 8px;
        margin-top: 15px; 
        margin-bottom: 15px; 
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    
    }

    /* Styling for the new tracking widget on the home page */
    #home-tracking-widget {
        position: absolute;
        top: 90px; /* Below navbar */
        right: 30px;
        width: 300px;
        max-width: 90%; /* Ensure it doesn't overflow on smaller viewports if not handled by media queries */
        background-color: rgba(15, 23, 42, 0.85); /* Dark slate, semi-transparent */
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        z-index: 10;
        color: var(--text-light);
        border: 1px solid rgba(var(--logo-blue-primary-rgb, 45, 140, 255), 0.5); /* Use RGB for alpha or a pre-defined var */
    }
    #home-tracking-widget h2 { /* Tracking title inside widget */
        font-size: 1.4em;
        color: var(--logo-orange-primary);
        margin-top: 0;
        margin-bottom: 10px;
    }
    #home-tracking-widget p { /* Tracking description inside widget */
        font-size: 0.9em;
        margin-bottom: 15px;
        color: var(--text-dark-subtle);
    }
    #home-tracking-widget #tracking-input {
        width: calc(100% - 30px); /* Full width minus padding */
        margin-bottom: 10px;
        background-color: rgba(255,255,255,0.05);
        border: 1px solid var(--logo-blue-secondary);
    }
    #home-tracking-widget #track-button {
        width: 100%;
        padding: 10px 15px !important; /* Adjusted padding */
        font-size: 0.95em; /* Slightly smaller font */
        /* Gradient and other styles are already applied via #track-button globally */
    }
    #home-tracking-widget #tracking-results {
        margin-top: 15px;
        background: rgba(255, 255, 255, 0.05);
        padding: 10px;
        border-radius: 5px;
        min-height: 40px; /* Adjusted height */
        font-size: 0.85em;
        text-align: start; /* Keep results text aligned to start */
        border: 1px dashed var(--logo-blue-secondary);
    }


    h1, h2 {
      margin-bottom: 25px; 
      color: var(--text-light);
      font-weight: 700;
    }
    /* Generic h2, ensure tracking widget h2 is more specific if needed */
    section:not(#home) h2 { 
        font-size: 2.2em;
    }


	.card-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 25px; 
      margin-top: 30px;
      max-width: 1100px; 
    }

    .info-card, .team-member { 
      background: var(--card-bg);
      border-radius: 12px; 
      padding: 25px; 
      width: 300px; 
      backdrop-filter: blur(8px); 
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      color: var(--text-dark-subtle);
      text-align: center;
      border: 1px solid rgba(255,255,255,0.1); 
      position: relative; 
      overflow: hidden; 
    }
    .info-card::before, .team-member::before { 
        content: "";
        position: absolute;
        top: 0; right: 0; bottom: 0; left: 0;
        z-index: -1;
        margin: -2px; 
        border-radius: inherit; 
        background: transparent; 
        transition: background 0.4s ease;
    }

    .info-card:hover, .team-member:hover {
      transform: translateY(-8px); 
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    .info-card:hover::before, .team-member:hover::before {
        background: var(--card-border-hover); 
    }


    .info-card h3, .team-member h3 {
      margin-top: 0;
      font-size: 1.5em; 
      margin-bottom: 12px;
      color: var(--logo-orange-primary); 
      font-weight: 700;
    }
     #about .team-member h3 { 
        color: var(--text-light);
    }
     #team .team-member.highlight h3 {
        color: var(--logo-yellow-accent);
     }


    .info-card p, .team-member p {
      font-size: 1em;
      line-height: 1.7; 
    }
   
    .team-photo {
      width: 120px; 
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 20px;
      border: 3px solid var(--logo-blue-secondary); 
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    #team .team-member.highlight .team-photo {
        border-color: gold;
    }

    img.illustration {
      max-width: 580px; 
      transition: transform 0.3s ease;
      margin-top: 20px;
    }
    img.illustration:hover {
      transform: scale(1.08); 
    }
    section img.illustration[src="logo 210.jpg"] {
        max-width: 200px; 
        max-height: 150px; 
        background: rgba(255,255,255,0.1); 
        border-radius: 8px;
        padding: 10px;
    }

    .map-container {
      width: 100%;
      max-width: 600px;
      height: 400px;
      margin-top: 20px;
      border-radius: 8px;
      overflow: hidden; 
    }
    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      z-index: 990;
      background: var(--footer-gradient);
      color: var(--text-dark-subtle);
      text-align: center;
      padding: 15px 10px; 
      box-sizing: border-box;
      font-size: 0.9em;
    }
    input[type="text"] { /* General text input, tracking input has more specific style */
      padding:12px 15px; 
      width:80%;
      max-width:350px; 
      border-radius: 6px;
      border: 1px solid var(--logo-blue-primary); 
      background-color: rgba(255,255,255,0.1); 
      color: var(--text-light); 
      font-family: 'Cairo', sans-serif;
    }
    input[type="text"]::placeholder {
        color: var(--text-dark-subtle);
    }
    ul {
      color: var(--text-dark-subtle);
      text-align: start;
      line-height: 1.8;
    }
     /* الشات بوت */
    #chat-icon {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1200;
    }
    #chat-icon button {
      padding: 12px;
      border: none;
      border-radius: 50%;
      background: var(--logo-blue-primary);
      color: var(--text-light);
      font-size: 22px; 
      box-shadow: 0 2px 8px rgba(0,0,0,0.4);
      cursor: pointer;
      transition: transform 0.2s ease, background-color 0.2s ease;
    }
    #chat-icon button:hover {
        transform: scale(1.1);
        background: var(--logo-blue-secondary);
    }

    #chatbot {
      display: none;
      position: fixed;
      bottom: 80px;
      right: 20px;
      width: 330px; 
      height: 450px; 
      background: #fff;
      border: 1px solid var(--logo-blue-primary);
      border-radius: 10px; 
      box-shadow: 0 5px 20px rgba(0,0,0,0.2);
      z-index: 1200;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    #chatbot-header {
      background: var(--logo-blue-primary);
      color: var(--text-light);
      padding: 12px 15px; 
      text-align: center;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1.1em;
    }
    #lang-toggle { 
      background: rgba(255,255,255,0.2);
      border: none;
      color: var(--text-light);
      font-weight: bold;
      cursor: pointer;
      font-size: 0.9rem;
      padding: 5px 8px;
      border-radius: 4px;
      transition: background-color 0.2s ease;
    }
    #lang-toggle:hover {
        background: rgba(255,255,255,0.3);
    }
    #chat-log {
      flex: 1;
      padding: 15px; 
      overflow-y: auto;
      font-size: 14px;
      background-color: #f4f7f9; 
    }
    #chat-form {
      display: flex;
      border-top: 1px solid #ddd;
      padding: 5px; 
      background-color: #fff;
    }
    #user-input { 
      flex: 1;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 20px; 
      outline: none;
      margin-right: 5px;
      font-family: 'Cairo', sans-serif;
      color: #333;
    }
    #chat-form button { 
      padding: 10px 15px;
      background: var(--logo-blue-primary);
      border: none;
      color: var(--text-light);
      cursor: pointer;
      border-radius: 20px; 
      transition: background-color 0.2s ease;
    }
     #chat-form button:hover {
        background: var(--logo-blue-secondary);
     }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-6px); }
      40%, 80% { transform: translateX(6px); }
    }
    .chat-message {
        padding: 8px 12px;
        border-radius: 15px;
        margin-bottom: 8px;
        max-width: 80%;
        line-height: 1.4;
    }
    .chat-message.user {
      text-align: right;
      background-color: var(--logo-blue-primary);
      color: white;
      margin-left: auto; 
      border-bottom-right-radius: 5px;
    }
    .chat-message.bot {
      text-align: left;
      background-color: #e9ebee;
      color: #333;
      margin-right: auto; 
      border-bottom-left-radius: 5px;
    }
    #typing-indicator {
      font-style: italic;
      color: #777;
      padding: 5px 10px;
    }
   
    #track-button { /* General track button styles, will apply to the one in the widget too */
        padding: 12px 25px !important; 
        margin-top: 20px !important; /* This might need adjustment if it's too much for the widget */
        background: var(--button-accent-gradient) !important; 
        color: white !important; 
        border: none;
        border-radius: 6px !important; 
        cursor: pointer;
        font-weight: bold;
        text-transform: uppercase; 
        letter-spacing: 0.5px; 
        transition: transform 0.2s ease, box-shadow 0.2s ease !important;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2) !important;
    }
    #track-button:hover {
        transform: translateY(-2px) !important;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3) !important;
    }
    
    .quick-reply-container button {
        background: var(--logo-blue-primary) !important;
        color: #fff !important;
        border: none !important;
        padding: 8px 15px !important; 
        border-radius: 20px !important; 
        cursor: pointer !important;
        font-size: 0.9rem !important;
        transition: background-color 0.2s ease !important;
    }
    .quick-reply-container button:hover {
        background: var(--logo-blue-secondary) !important;
    }

  </style>
</head>
<body>
  <nav>
    <div><img src="logo 21.png" alt="عبر الأوطان Logo" id="nav-logo-img"/></div>
    <ul>
      <li><a href="#home" id="nav-home">الرئيسية</a></li>
      <li><a href="#about" id="nav-about">من نحن</a></li>
      <li><a href="#jobs" id="nav-jobs">الوظائف</a></li>
      <li><a href="#across" id="nav-across">عنا</a></li>
      <li><a href="#Locations" id="nav-Locations">مواقعنا</a></li>
      <li><a href="#team" id="nav-team">فريقنا</a></li>
      <li><a href="#contact" id="nav-contact">تواصل</a></li>
    </ul>
      <button id="language-switcher">EN</button>
  </nav>

  <main> 
    <section id="home" class="hero">
      <div id="home-tracking-widget">
        <h2 id="tracking-title">تتبع شحنتك</h2> <p id="tracking-desc">أدخل رقم التتبع لمعرفة حالة شحنتك:</p> <input type="text" placeholder="أدخل رقم التتبع" id="tracking-input"> <button id="track-button">تتبع الشحنة</button> <div id="tracking-results" style="display: none;"></div> </div>

      <h1 id="home-title">مرحبًا بك في عبر الأوطان</h1>
      <p id="home-desc">نقدم حلول شحن ذكية ومخفضة داخل المملكة</p>
      <img src="abr alawtan vehicles 3.png" alt="شحن" class="illustration" />
 
      
    </section>

    <section id="about" class="about">
      <h2 id="about-title">من نحن</h2>
      <p id="about-desc"> نحن مؤسسة وساطة شحن  تعمل منذ اكثر من عقد من الزمان لتجمع أفضل شركات الشحن في منصة واحدة.</p>
      <img src="logo 210.jpg" alt="عن الشركة" class="illustration" />
      <div class="team-container">
        <div class="team-member">
          <img src="ceo.jpg" alt="المدير التنفيذي" class="team-photo" />
          <h3>المدير التنفيذي</h3>
          <p>يقود المؤسسة برؤية استراتيجية ويضمن تحقيق أهداف النمو والتوسع.</p>
        </div>

        <div class="team-member">
          <img src="fahad-transformed.png" alt="المدير العام" class="team-photo" />
          <h3>المدير العام</h3>
          <p>يشرف على العمليات اليومية ويضمن جودة الخدمات المقدمة للعملاء.</p>
        </div>

        <div class="team-member">
          <img src="admin-manager.jpg" alt="المدير الإداري" class="team-photo" />
          <h3>المدير الإداري</h3>
          <p>يدير الموارد الإدارية والمالية ويضمن التزام المؤسسة بالإجراءات التنظيمية.</p>
        </div>
      </div>
    </section>

    <section id="jobs" class="jobs">
      <h2 id="jobs-title">فرص العمل</h2>
      <p id="jobs-desc">انضم إلى فريقنا وكن جزءًا من نجاحنا!</p>
      <ul id="jobs-list">
        <li>مسوق ميداني</li>
        <li>موظف خدمة عملاء</li>
        <li>محلل بيانات لوجستية</li>
      </ul>
      <img src="jobs.png" alt="وظائف" class="illustration" />
    </section>

    <section id="across" class="across">
      <h2 id="across-title">عنا</h2>
      <div class="card-container">
        <div class="info-card">
          <h3>رؤيتنا</h3>
          <p>أن نكون الخيار الأول والأكثر ثقة في قطاع الشحن المحلي داخل المملكة، من خلال تقديم حلول شحن ذكية، سريعة، وموثوقة تلبي احتياجات الأفراد والتجار.ة.</p>
        </div>
        <div class="info-card">
          <h3>رسالتنا</h3>
          <p>توفير خدمات وساطة شحن محلية بتكلفة مناسبة وجودة عالية، من خلال شراكات استراتيجية مع أفضل شركات الشحن بنظامي CSP  و DSP، وتمكين العملاء من الوصول إلى خيارات متنوعة بكل يسر وشفافية..</p>
        </div>
        <div class="info-card">
          <h3>أهدافنا</h3>
          <p>تحقيق التوسع، رضا العملاء، وبناء شراكات استراتيجية مع شركات الشحن المحلية.</p>
        </div>
        <div class="info-card">
          <h3>قيمنا</h3>
          <p>الشفافية: نلتزم بتقديم معلومات واضحة وصحيحة لعملائنا. الابتكار: نسعى لتبسيط تجربة الشحن وتقديم حلول تقنية متقدمة. الثقة: نبني علاقات طويلة المدى مبنية على الصدق والمصداقية. الاحترافية: نقدم خدماتنا بكفاءة عالية ومعايير مهنية صارمة.
          </p>
        </div>
      </div>
      <img src="logo 210.jpg" alt="عنا" class="illustration" />
    </section>

    <section id="team" class="about"> 
      <h2 id="team-title">فريقنا</h2>
      <div class="team-member highlight"> 
        <img src="salman.JPG" alt="موظف الشهر" class="team-photo">
        <h3 id="employee-month-name">سلمان خان</h3>
        <p id="employee-month-title">موظف الشهر 🎉</p>
      </div>
      <div class="card-container">
        <div class="info-card">
          <h3>تركي العتيبي</h3>
          <p>مدير العمليات اللوجستية بخبرة 10 سنوات.</p>
        </div>
        <div class="info-card">
          <h3>هيثم شريف</h3>
          <p>خبير خدمة عملاء ومسؤول عن رضا العملاء.</p>
        </div>
        <div class="info-card">
          <h3>مصطفى الكرداوي</h3>
          <p>محلل بيانات ومسؤول تحسين الأداء.</p>
        </div>
      </div>
    </section>

    <section id="Locations" class="Locations">
      <h2 id="Locations-title">مواقعنا</h2>
      <div class="card-container">
        <div class="info-card">
          <h3>الرياض</h3>
          <p>حي الرائد - الملز ش جرير - ظهرة لبن ش نابلس -ظهرة لبن ش نجران - قرطبة ش رضوى - الجنادرية</p>
        </div>
        <div class="info-card">
          <h3>القصيم</h3>
          <p> الرس - دخنة - الدليمية</p>
        </div>
        <div class="info-card">
          <h3> المنطقة الوسطى</h3>
          <p>حوطة بني تميم - الزلفي - شقراء -مرات - ثادق</p>
        </div>
        <div class="info-card">
          <h3> المنطقة الشمالية</h3>
          <p> دومة الجندل - الذيبية - مدينة الملك خالد العسكرية بحفر الباطن - رفحاء - حقل - تيماء - الوجه</p>
        </div>
        <div class="info-card">
          <h3>المنطقة الشرقية</h3>
          <p>النعيرية</p>
        </div>
        <div class="info-card">
          <h3> منطقة عسير</h3>
          <p>ابها -حي الموظفين</p>
        </div>
      </div>
      <img src="locations.jpg" alt="مواقعنا" class="illustration" />
    </section>

    <section id="contact" class="contact">
      <h2 id="contact-title">تواصل معنا</h2>
      <p id="contact-desc">نحن هنا لمساعدتك. تواصل معنا عبر:</p>
      <ul id="contact-info">
        <li id="contact-phone">رقم الهاتف: 966536708287</li>
        <li id="contact-email">البريد: Shaiba@abr-alawtan.com</li>
      </ul>
      <div class="map-container">
        <iframe src="https://maps.google.com/maps?q=2890%20%D8%B7%D8%B1%D9%8A%D9%82%20%D8%A7%D9%84%D9%85%D9%84%D9%83%20%D8%B9%D8%A8%D8%AF%20%D8%A7%D9%84%D8%B9%D8%B2%D9%8A%D8%B2&t=&z=15&ie=UTF8&iwloc=&output=embed" width="100%" height="100%" style="border:0;" allowfullscreen loading="lazy"></iframe>
      </div>
    </section>
  </main>
  <footer>
    © 2025 مؤسسة عبر الأوطان لوسطاء الشحن. جميع الحقوق محفوظة.
  </footer>

  <script>
    const switcher = document.getElementById("language-switcher");
    const html = document.documentElement;

   const translations = {
  ar: {
    dir: "rtl",
    switch: "EN",
    navLogoAlt: "شعار عبر الأوطان",
    nav: ["الرئيسية", "من نحن", "الوظائف", "عنا", "مواقعنا", "فريقنا", "تواصل"], // Tracking removed
    home: ["مرحبًا بك في عبر الأوطان", "نقدم حلول شحن ذكية ومخفضة داخل المملكة"],
    about: ["من نحن", "نحن مؤسسة وساطة شحن تعمل منذ اكثر من عقد من الزمان لتجمع أفضل شركات الشحن في منصة واحدة."],
    jobs: ["فرص العمل", "انضم إلى فريقنا وكن جزءًا من نجاحنا!", ["مسوق ميداني", "موظف خدمة عملاء", "محلل بيانات لوجستية"]],
    tracking: ["تتبع شحنتك", "أدخل رقم التتبع لمعرفة حالة شحنتك:", "أدخل رقم التتبع", "تتبع الشحنة"], // Kept for widget
    across: {
      title: "عنا",
      cards: [
        {
          heading: "رؤيتنا",
          paragraph: "أن نكون الخيار الأول والأكثر ثقة في قطاع الشحن المحلي داخل المملكة، من خلال تقديم حلول شحن ذكية، سريعة، وموثوقة تلبي احتياجات الأفراد والتجار."
        },
        {
          heading: "رسالتنا",
          paragraph: "توفير خدمات وساطة شحن محلية بتكلفة مناسبة وجودة عالية، من خلال شراكات استراتيجية مع أفضل شركات الشحن بنظامي CSP و DSP، وتمكين العملاء من الوصول إلى خيارات متنوعة بكل يسر وشفافية."
        },
        {
          heading: "أهدافنا",
          paragraph: "تحقيق التوسع، رضا العملاء، وبناء شراكات استراتيجية مع شركات الشحن المحلية."
        },
        {
          heading: "قيمنا",
          paragraph: "الشفافية: نلتزم بتقديم معلومات واضحة وصحيحة لعملائنا. الابتكار: نسعى لتبسيط تجربة الشحن وتقديم حلول تقنية متقدمة. الثقة: نبني علاقات طويلة المدى مبنية على الصدق والمصداقية. الاحترافية: نقدم خدماتنا بكفاءة عالية ومعايير مهنية صارمة."
        }
      ]
    },
    team: {
      title: "فريقنا",
      employeeMonthName: "سلمان خان",
      employeeMonthTitle: "موظف الشهر 🎉",
      members: [
        { name: "تركي العتيبي", title: "مدير العمليات اللوجستية بخبرة 10 سنوات." },
        { name: "هيثم شريف", title: "خبير خدمة عملاء ومسؤول عن رضا العملاء." },
        { name: "مصطفى الكرداوي", title: "محلل بيانات ومسؤول تحسين الأداء." }
      ]
    },
    Locations: {
      title: "مواقعنا",
      cards: [
        { heading: "الرياض", paragraph: "حي الرائد - الملز ش جرير - ظهرة لبن ش نابلس -ظهرة لبن ش نجران - قرطبة ش رضوى - الجنادرية" },
        { heading: "القصيم", paragraph: "الرس - دخنة - الدليمية" },
        { heading: "المنطقة الوسطى", paragraph: "حوطة بني تميم - الزلفي - شقراء -مرات - ثادق" },
        { heading: "المنطقة الشمالية", paragraph: "دومة الجندل - الذيبية - مدينة الملك خالد العسكرية بحفر الباطن - رفحاء - حقل - تيماء - الوجه" },
        { heading: "المنطقة الشرقية", paragraph: "النعيرية" },
        { heading: "منطقة عسير", paragraph: "ابها -حي الموظفين" }
      ]
    },
    contact: ["تواصل معنا", "نحن هنا لمساعدتك. تواصل معنا عبر:", "رقم الهاتف: 966536708287", "البريد: Shaiba@abr-alawtan.com"]
  },
  en: {
    dir: "ltr",
    switch: "中文",
    navLogoAlt: "Abr Al Awtan Logo",
    nav: ["Home", "About", "Jobs", "About Us", "Our Locations", "Our Team", "Contact"], // Tracking removed
    home: ["Welcome to Abr Al Awtan", "We offer smart and affordable shipping solutions within Saudi Arabia"],
    about: ["About Us", "We are a shipping brokerage that has been operating for over a decade, bringing together the best shipping companies on one platform."],
    jobs: ["Careers", "Join our team and be part of our success!", ["Field Marketer", "Customer Service Agent", "Logistics Data Analyst"]],
    tracking: ["Track Your Shipment", "Enter your tracking number to check shipment status:", "Enter tracking number", "Track Shipment"], // Kept for widget
    across: {
      title: "About Us",
      cards: [
        {
          heading: "Our Vision",
          paragraph: "To be the first and most trusted choice in the local shipping sector within the Kingdom, by providing smart, fast, and reliable shipping solutions that meet the needs of individuals and businesses."
        },
        {
          heading: "Our Mission",
          paragraph: "To provide local shipping brokerage services at an affordable cost and high quality, through strategic partnerships with the best shipping companies using both CSP and DSP systems, enabling customers to access diverse options with ease and transparency."
        },
        {
          heading: "Our Goals",
          paragraph: "Achieve expansion, customer satisfaction, and build strategic partnerships with local shipping companies."
        },
        {
          heading: "Our Values",
          paragraph: "Transparency: We are committed to providing clear and accurate information to our customers. Innovation: We strive to simplify the shipping experience and offer advanced technical solutions. Trust: We build long-term relationships based on honesty and credibility. Professionalism: We provide our services with high efficiency and strict professional standards."
        }
      ]
    },
    team: {
      title: "Our Team",
      employeeMonthName: "Salman Khan",
      employeeMonthTitle: "Employee of the Month 🎉",
      members: [
        { name: "Turki Al-Otaibi", title: "Logistics Operations Manager with 10 years of experience." },
        { name: "Haitham Sharif", title: "Customer service expert and responsible for customer satisfaction." },
        { name: "Mustafa Al-Kardawi", title: "Data analyst and performance improvement manager." }
      ]
    },
    Locations: {
      title: "Our Locations",
      cards: [
        { heading: "Riyadh", paragraph: "Al-Raid district - Al-Malaz st. Jarir - Dhahrat Laban st. Nablus - Dhahrat Laban st. Najran - Qurtubah st. Radwa - Al-Janadriyah" },
        { heading: "Al-Qassim", paragraph: "Al-Rass - Dukhna - Al-Dulaimiyah" },
        { heading: "Central Region", paragraph: "Howtat Bani Tamim - Al-Zulfi - Shaqra - Marrat - Thadig" },
        { heading: "Northern Region", paragraph: "Dumat Al-Jandal - Al-Dhaibiyah - King Khalid Military City in Hafar Al-Batin - Rafha - Haql - Taima - Al-Wajh" },
        { heading: "Eastern Region", paragraph: "Al-Nairiyah" },
        { heading: "Asir Region", paragraph: "Abha - Al-Mowazafeen district" }
      ]
    },
    contact: ["Contact Us", "We're here to help. Reach us via:", "Phone: +966536708287", "Email: Shaiba@abr-alawtan.com"]
  },
  zh: {
    dir: "ltr",
    switch: "عربي",
    navLogoAlt: "跨国物流标志",
    nav: ["首页", "关于我们", "招聘", "关于我们", "我们的地点", "我们的团队", "联系"], // Tracking removed
    home: ["欢迎来到跨国物流", "我们在沙特提供智能又优惠的快递方案"],
    about: ["关于我们", "我们是一家经营了十多年的物流中介机构，将最好的物流公司整合到一个平台。"],
    jobs: ["招聘", "加入我们，共创辉煌！", ["市场专员", "客服专员", "物流数据分析师"]],
    tracking: ["追踪快递", "请输入快递单号查询状态：", "请输入单号", "追踪快递"], // Kept for widget
    across: {
      title: "关于我们",
      cards: [
        {
          heading: "我们的愿景",
          paragraph: "通过提供智能、快速、可靠的运输解决方案，满足个人和企业的需求，成为沙特阿拉伯境内本地运输行业的首选和最值得信赖的选择。"
        },
        {
          heading: "我们的使命",
          paragraph: "通过与最佳运输公司（采用CSP和DSP系统）建立战略合作伙伴关系，提供经济实惠且高质量的本地运输代理服务，使客户能够轻松透明地访问各种选择。"
        },
        {
          heading: "我们的目标",
          paragraph: "实现业务扩展，提升客户满意度，并与本地运输公司建立战略合作伙伴关系。"
        },
        {
          heading: "我们的价值观",
          paragraph: "透明度：我们致力于为客户提供清晰准确的信息。创新：我们努力简化运输体验并提供先进的技术解决方案。信任：我们建立在诚实和信誉基础上的长期关系。专业精神：我们以高效率和严格的专业标准提供服务。"
        }
      ]
    },
    team: {
      title: "我们的团队",
      employeeMonthName: "萨勒曼·汗",
      employeeMonthTitle: "本月员工 🎉",
      members: [
        { name: "图尔基·阿尔-奥泰比", title: "拥有10年经验的物流运营经理。" },
        { name: "海赛姆·谢里夫", title: "客户服务专家，负责客户满意度。" },
        { name: "穆斯塔法·阿尔-卡尔达维", title: "数据分析师和绩效改进经理。" }
      ]
    },
    Locations: {
      title: "我们的地点",
      cards: [
        { heading: "利雅得", paragraph: "拉伊德区 - 马拉兹贾里尔街 - 达赫拉特拉班纳布卢斯街 - 达赫拉特拉班纳吉兰街 - 库尔图巴拉德瓦街 - 贾纳德里亚" },
        { heading: "盖西姆", paragraph: "拉萨 - 杜赫纳 - 杜莱米亚" },
        { heading: "中部地区", paragraph: "胡塔特巴尼塔米姆 - 祖尔菲 - 沙格拉 - 马拉特 - 萨迪格" },
        { heading: "北部地区", paragraph: "杜马特贾达尔 - 达伊比亚 - 哈法尔巴廷的哈立德国王军事城 - 拉夫哈 - 哈格尔 - 泰马 - 瓦杰" },
        { heading: "东部地区", paragraph: "奈里亚" },
        { heading: "阿西尔地区", paragraph: "艾卜哈 - 穆瓦扎芬区" }
      ]
    },
    contact: ["联系我们", "我们随时为您服务，联系方式如下：", "电话: +966536708287", "邮箱: Shaiba@abr-alawtan.com"]
  }
};

function applyTranslation(lang) {
  const t = translations[lang];
  html.lang = lang;
  html.dir = t.dir;
  document.getElementById("language-switcher").textContent = t.switch;
  document.getElementById("nav-logo-img").alt = t.navLogoAlt;

  // Update Navigation Links
  const navLinksData = [ // No longer using tracking
      { id: "nav-home", text: t.nav[0] },
      { id: "nav-about", text: t.nav[1] },
      { id: "nav-jobs", text: t.nav[2] },
      { id: "nav-across", text: t.nav[3] },
      { id: "nav-Locations", text: t.nav[4] },
      { id: "nav-team", text: t.nav[5] },
      { id: "nav-contact", text: t.nav[6] }
  ];
  navLinksData.forEach(link => {
      document.getElementById(link.id).textContent = link.text;
  });


  // Home
  document.getElementById("home-title").textContent = t.home[0];
  document.getElementById("home-desc").textContent = t.home[1];

  // About Us (main section)
  document.getElementById("about-title").textContent = t.about[0];
  document.getElementById("about-desc").textContent = t.about[1];

  const teamMembersAbout = document.querySelectorAll('#about .team-member');
  const teamMembersAboutData = [
    { ar: "المدير التنفيذي", en: "CEO", zh: "首席执行官", descAr: "يقود المؤسسة برؤية استراتيجية ويضمن تحقيق أهداف النمو والتوسع.", descEn: "Leads the organization with a strategic vision and ensures the achievement of growth and expansion goals.", descZh: "以战略眼光领导组织，确保实现增长和扩张目标。" },
    { ar: "المدير العام", en: "General Manager", zh: "总经理", descAr: "يشرف على العمليات اليومية ويضمن جودة الخدمات المقدمة للعملاء.", descEn: "Oversees daily operations and ensures the quality of services provided to customers.", descZh: "监督日常运营，确保为客户提供优质服务。" },
    { ar: "المدير الإداري", en: "Administrative Manager", zh: "行政经理", descAr: "يدير الموارد الإدارية والمالية ويضمن التزام المؤسسة بالإجراءات التنظيمية.", descEn: "Manages administrative and financial resources and ensures the organization's compliance with regulatory procedures.", descZh: "管理行政和财务资源，确保组织遵守监管程序。" }
  ];
  teamMembersAbout.forEach((member, index) => {
    member.querySelector('h3').textContent = teamMembersAboutData[index][lang];
    member.querySelector('p').textContent = teamMembersAboutData[index][lang === 'ar' ? 'descAr' : lang === 'en' ? 'descEn' : 'descZh'];
  });


  // Jobs
  document.getElementById("jobs-title").textContent = t.jobs[0];
  document.getElementById("jobs-desc").textContent = t.jobs[1];
  document.getElementById("jobs-list").innerHTML = t.jobs[2].map(job => `<li>${job}</li>`).join('');

  // Tracking Widget on Home Page
  document.getElementById("tracking-title").textContent = t.tracking[0]; // This ID is now inside #home-tracking-widget
  document.getElementById("tracking-desc").textContent = t.tracking[1];  // This ID is now inside #home-tracking-widget
  document.getElementById("tracking-input").placeholder = t.tracking[2]; // This ID is now inside #home-tracking-widget
  document.getElementById("track-button").textContent = t.tracking[3];    // This ID is now inside #home-tracking-widget


  // Across (About Us - Cards)
  document.getElementById("across-title").textContent = t.across.title;
  const acrossCards = document.querySelectorAll('#across .info-card');
  t.across.cards.forEach((cardData, index) => {
    if (acrossCards[index]) {
      acrossCards[index].querySelector('h3').textContent = cardData.heading;
      acrossCards[index].querySelector('p').textContent = cardData.paragraph;
    }
  });

  // Team
  document.getElementById("team-title").textContent = t.team.title;
  document.getElementById("employee-month-name").textContent = t.team.employeeMonthName;
  document.getElementById("employee-month-title").textContent = t.team.employeeMonthTitle;
  const teamCards = document.querySelectorAll('#team .card-container .info-card');
  t.team.members.forEach((memberData, index) => {
    if (teamCards[index]) {
      teamCards[index].querySelector('h3').textContent = memberData.name;
      teamCards[index].querySelector('p').textContent = memberData.title;
    }
  });


  // Locations
  document.getElementById("Locations-title").textContent = t.Locations.title;
  const locationCards = document.querySelectorAll('#Locations .info-card');
  t.Locations.cards.forEach((cardData, index) => {
    if (locationCards[index]) {
      locationCards[index].querySelector('h3').textContent = cardData.heading;
      locationCards[index].querySelector('p').textContent = cardData.paragraph;
    }
  });

  // Contact
  document.getElementById("contact-title").textContent = t.contact[0];
  document.getElementById("contact-desc").textContent = t.contact[1];
  document.getElementById("contact-phone").textContent = t.contact[2];
  document.getElementById("contact-email").textContent = t.contact[3];

  // Adjust #home-tracking-widget text-align based on language direction
  const trackingWidget = document.getElementById('home-tracking-widget');
  if (trackingWidget) {
    trackingWidget.style.textAlign = (t.dir === 'rtl') ? 'right' : 'left';
  }
}

switcher.addEventListener("click", () => {
  const currentLang = html.lang;
  const nextLang = currentLang === "ar" ? "en" : currentLang === "en" ? "zh" : "ar";
  applyTranslation(nextLang);
});

applyTranslation("ar");
 

trackButton.addEventListener('click', async () => {
  const trackingNumber = trackingInput.value.trim();
  const currentLang = html.lang;
  trackingResultsDiv.style.display = 'block';

  if (!trackingNumber) {
    trackingResultsDiv.textContent = currentLang === 'ar' ? 'الرجاء إدخال رقم تتبع.' :
                                     currentLang === 'en' ? 'Please enter a tracking number.' :
                                     '请输入追踪号码。';
    return;
  }

  const courier = prompt(currentLang === 'ar' ? 'اختر شركة التوصيل: aramex أو imile' :
                         currentLang === 'en' ? 'Choose courier: aramex or imile' :
                         '请选择快递公司：aramex 或 imile').toLowerCase();

  if (!['aramex', 'imile'].includes(courier)) {
    trackingResultsDiv.textContent = currentLang === 'ar' ? 'شركة الشحن غير مدعومة.' :
                                     currentLang === 'en' ? 'Unsupported courier.' :
                                     '不支持的快递公司。';
    return;
  }

  try {
    const res = await fetch('https://YOUR_VERCEL_PROJECT.vercel.app/api/track', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ trackingNumber, courier })
    });

    const data = await res.json();

    if (res.ok && data) {
      trackingResultsDiv.textContent = JSON.stringify(data, null, 2);
    } else {
      trackingResultsDiv.textContent = currentLang === 'ar' ? 'لم يتم العثور على بيانات التتبع.' :
                                       currentLang === 'en' ? 'Tracking data not found.' :
                                       '未找到追踪信息。';
    }
  } catch (err) {
    trackingResultsDiv.textContent = currentLang === 'ar' ? 'حدث خطأ أثناء التتبع.' :
                                     currentLang === 'en' ? 'Error fetching tracking info.' :
                                     '获取追踪信息时出错。';
  }
});

</script>

<div id="chat-icon">
  <button aria-label="فتح الشات">💬</button>
</div>

<div id="chatbot" role="dialog" aria-modal="true" aria-labelledby="chatbot-title">
  <div id="chatbot-header">
    <span id="chatbot-title">مساعد عبر الأوطان</span>
    <button id="lang-toggle" aria-label="تبديل اللغة">EN</button>
  </div>
  <div id="chat-log" aria-live="polite" aria-atomic="false"></div>
  <form id="chat-form" autocomplete="off">
    <input type="text" id="user-input" placeholder="اكتب سؤالك هنا..." aria-label="ادخل رسالتك" />
    <button type="submit">إرسال</button>
  </form>
</div>

<script>
   // SCRIPT FROM PREVIOUS RESPONSE - UNCHANGED
  document.addEventListener('DOMContentLoaded', () => {
    const chat = document.getElementById("chatbot");
    const chatIconBtn = document.querySelector("#chat-icon button");
    const chatLog = document.getElementById("chat-log");
    const chatForm = document.getElementById("chat-form");
    const userInput = document.getElementById("user-input");
    const langToggleBtn = document.getElementById("lang-toggle");
    const chatbotTitle = document.getElementById("chatbot-title"); 


    let language = localStorage.getItem('chatLang') || 'ar';
    

    const responses = {
      ar: {
        title: "مساعد عبر الأوطان",
        inputPlaceholder: "اكتب سؤالك هنا...",
        sendButton: "إرسال",
        quickReplies: ["أسعار الشحن", "تتبع الشحنة", "خدماتنا", "التواصل"],
        welcome: 'مرحبًا! كيف يمكنني مساعدتك اليوم؟ يمكنك استخدام الخيارات الجاهزة أدناه أو كتابة سؤالك.',
        typing: 'المساعد يكتب...',
        ratingPrompt: 'هل كانت الخدمة مفيدة؟',
        ratingThanksPositive: 'شكرًا لتقييمك الإيجابي!',
        ratingThanksFeedback: 'شكرًا لملاحظاتك، سنعمل على تحسين الخدمة.',
        data: [
            { keywords: ["أسعار", "سعر", "كم", "price", "cost"], reply: "نقدم أسعار شحن مخفضة تبدأ من 12 ريال داخل المملكة. لمزيد من التفاصيل، تواصل معنا عبر واتساب." },
            { keywords: ["خدمة", "services", "تقدمون", "what"], reply: "نحن نوفر وساطة شحن مع أفضل شركات الشحن داخل المملكة مثل سمسا وناقل وأرامكس." },
            { keywords: ["تتبع", "tracking", "track"], reply: "يمكنك تتبع شحنتك من خلال رقم التتبع بعد تأكيد الطلب عبر شركائنا." },
            { keywords: ["وظائف", "وظيفة", "career", "job"], reply: "نحن نبحث دائمًا عن مواهب جديدة! يمكنك التقديم عبر صفحة الوظائف أو إرسال السيرة الذاتية إلى hr@abr-alawtan.com" },
            { keywords: ["hello", "hi", "مرحبا", "السلام", "أهلًا"], reply: "مرحبًا بك! كيف يمكنني مساعدتك اليوم؟" },
            { keywords: ["رقم", "contact", "تواصل", "whatsapp"], reply: "يمكنك التواصل معنا عبر الرقم: +966531954447 أو عبر البريد: Shaiba@abr-alawtan.com" },
            { keywords: [], reply: "عذرًا، لم أفهم سؤالك تمامًا. يرجى إعادة صياغته أو التواصل مع خدمة العملاء مباشرة." }
        ]
      },
      en: {
        title: "Abr Al Awtan Assistant",
        inputPlaceholder: "Type your question here...",
        sendButton: "Send",
        quickReplies: ["Shipping prices", "Track shipment", "Our services", "Contact us"],
        welcome: 'Welcome! How can I assist you today? You can use quick replies below or type your question.',
        typing: 'Assistant is typing...',
        ratingPrompt: 'Was this service helpful?',
        ratingThanksPositive: 'Thanks for your positive feedback!',
        ratingThanksFeedback: 'Thanks for your feedback, we will improve.',
        data: [
            { keywords: ["price", "cost", "how much"], reply: "We offer discounted shipping rates starting from 12 SAR within Saudi Arabia. Contact us on WhatsApp for more details." },
            { keywords: ["service", "services", "what"], reply: "We provide shipping brokerage with top companies inside Saudi Arabia like SMSA, Naqel, and Aramex." },
            { keywords: ["tracking", "track"], reply: "You can track your shipment with the tracking number after order confirmation via our partners." },
            { keywords: ["job", "career", "vacancy"], reply: "We are always looking for new talents! Apply via the careers page or send your CV to hr@abr-alawtan.com" },
            { keywords: ["hello", "hi", "مرحبا", "السلام", "أهلًا"], reply: "Hello! How can I assist you today?" },
            { keywords: ["contact", "phone", "whatsapp"], reply: "You can contact us at: +966531954447 or via email: Shaiba@abr-alawtan.com" },
            { keywords: [], reply: "Sorry, I didn't understand your question. Please rephrase or contact customer support." }
        ]
      }
    };
    
    function updateChatbotUI() {
        langToggleBtn.textContent = language === 'ar' ? 'EN' : 'ع';
        chatbotTitle.textContent = responses[language].title;
        userInput.placeholder = responses[language].inputPlaceholder;
        chatForm.querySelector('button[type="submit"]').textContent = responses[language].sendButton;
    }


    function saveConversation() {
      const msgs = Array.from(chatLog.children).map(div => ({
        className: div.className,
        text: div.textContent,
        isQuickReplyContainer: div.classList.contains('quick-reply-container'), 
        isRatingContainer: div.classList.contains('rating-container') 
      }));
      localStorage.setItem(`chatConversation_${language}`, JSON.stringify(msgs));
    }

    function loadConversation() {
      chatLog.innerHTML = '';
      const saved = localStorage.getItem(`chatConversation_${language}`);
      if (saved) {
        const msgs = JSON.parse(saved);
        msgs.forEach(msg => {
          if (msg.isQuickReplyContainer) { 
            showQuickReplies(); 
          } else if (msg.isRatingContainer) { 
             showRating(); 
          }else {
            const div = document.createElement('div');
            div.className = msg.className;
            div.textContent = msg.text;
            chatLog.appendChild(div);
          }
        });
        chatLog.scrollTop = chatLog.scrollHeight;
      } else {
         showWelcome(); 
      }
    }

    function addMessage(who, text) {
      const div = document.createElement('div');
      div.className = `chat-message ${who}`;
      div.textContent = text;
      chatLog.appendChild(div);
      chatLog.scrollTop = chatLog.scrollHeight;
      
      if (who === 'bot') notifyNewMessage();
      saveConversation();
    }

    function showWelcome() {
      addMessage('bot', responses[language].welcome);
      showQuickReplies();
    }
    
    function showQuickReplies() {
      const existingReplies = chatLog.querySelector('.quick-reply-container');
      if (existingReplies) existingReplies.remove();

      const container = document.createElement('div');
      container.className = 'quick-reply-container'; 
      container.style.marginTop = '10px';
      container.style.display = 'flex';
      container.style.flexWrap = 'wrap';
      container.style.justifyContent = 'center'; 
      container.style.gap = '8px';

      responses[language].quickReplies.forEach(text => {
        const btn = document.createElement('button');
        btn.textContent = text;
        
        btn.addEventListener('click', () => {
          addMessage('user', text); 
          processUserInput(text); 
          container.remove(); 
          saveConversation(); 
        });
        container.appendChild(btn);
      });
      chatLog.appendChild(container);
      chatLog.scrollTop = chatLog.scrollHeight;
      saveConversation(); 
    }


    let typingTimeout;
    function showTypingIndicator() {
      const indicator = document.createElement('div');
      indicator.id = 'typing-indicator';
      indicator.textContent = responses[language].typing;
      chatLog.appendChild(indicator);
      chatLog.scrollTop = chatLog.scrollHeight;
    }
    function clearTypingIndicator() {
      const indicator = document.getElementById('typing-indicator');
      if (indicator) indicator.remove();
    }

    function showRating() {
      const existingRating = chatLog.querySelector('.rating-container');
      if (existingRating) existingRating.remove();

      const container = document.createElement('div');
      container.className = 'rating-container'; 
      container.style.marginTop = '10px';
      container.style.textAlign = 'center';
      container.style.paddingTop = '10px';
      container.style.borderTop = '1px solid #ddd';

      const text = document.createElement('p');
      text.textContent = responses[language].ratingPrompt;
      container.appendChild(text);

      const thumbsUp = document.createElement('button');
      thumbsUp.textContent = '👍';
      thumbsUp.style.margin = '0 10px';
      thumbsUp.style.fontSize = '1.5rem';
      thumbsUp.style.cursor = 'pointer';
      thumbsUp.style.background = 'none';
      thumbsUp.style.border = 'none';
      thumbsUp.addEventListener('click', () => {
        addMessage('bot', responses[language].ratingThanksPositive);
        container.remove();
        saveConversation(); 
      });

      const thumbsDown = document.createElement('button');
      thumbsDown.textContent = '👎';
      thumbsDown.style.margin = '0 10px';
      thumbsDown.style.fontSize = '1.5rem';
      thumbsDown.style.cursor = 'pointer';
      thumbsDown.style.background = 'none';
      thumbsDown.style.border = 'none';
      thumbsDown.addEventListener('click', () => {
        addMessage('bot', responses[language].ratingThanksFeedback);
        container.remove();
        saveConversation(); 
      });

      container.appendChild(thumbsUp);
      container.appendChild(thumbsDown);

      chatLog.appendChild(container);
      chatLog.scrollTop = chatLog.scrollHeight;
      saveConversation(); 
    }


    let newMessageAlert = false;
    function resetNewMessageAlert() {
      newMessageAlert = false;
      chatIconBtn.style.animation = "none";
      void chatIconBtn.offsetWidth; 
      chatIconBtn.style.animation = "";
    }
    function notifyNewMessage() {
      if (chat.style.display === "none" && !newMessageAlert) {
        newMessageAlert = true;
        chatIconBtn.style.animation = "shake 0.5s ease-in-out 3";
      }
    }

    function toggleLanguage() {
      language = language === 'ar' ? 'en' : 'ar';
      localStorage.setItem('chatLang', language);
      updateChatbotUI();
      clearChat(false); 
      loadConversation();
      if (chatLog.children.length === 0) { 
          showWelcome();
      }
    }
    langToggleBtn.addEventListener('click', toggleLanguage);

    function clearChat(shouldShowWelcome = true) {
      chatLog.innerHTML = '';
      localStorage.removeItem(`chatConversation_${language}`);
      if (shouldShowWelcome) {
          showWelcome();
      }
    }
    
    function toggleChat() {
      if (chat.style.display === "flex") {
        chat.style.display = "none";
      } else {
        chat.style.display = "flex";
        if (chatLog.children.length === 0 && !localStorage.getItem(`chatConversation_${language}`)) {
            showWelcome(); 
        } else {
            loadConversation(); 
        }
        chatLog.scrollTop = chatLog.scrollHeight; 
        resetNewMessageAlert();
      }
    }
    chatIconBtn.addEventListener("click", toggleChat);


    function processUserInput(userText) {
        clearTypingIndicator();
        showTypingIndicator();

        const quickRepliesEl = chatLog.querySelector('.quick-reply-container');
        if (quickRepliesEl) quickRepliesEl.remove();
        const ratingEl = chatLog.querySelector('.rating-container');
        if (ratingEl) ratingEl.remove();

        let replyObj = responses[language].data.find(r =>
            r.keywords.length === 0 ||
            r.keywords.some(k => userText.toLowerCase().includes(k.toLowerCase()))
        ) || responses[language].data[responses[language].data.length - 1]; 

        setTimeout(() => {
            clearTypingIndicator();
            addMessage('bot', replyObj.reply);
            showRating();
            saveConversation(); 
        }, 1000 + Math.random() * 1500);
    }

    chatForm.addEventListener("submit", e => {
      e.preventDefault();
      const userText = userInput.value.trim();
      if (!userText) return;

      addMessage('user', userText);
      userInput.value = '';
      processUserInput(userText);
    });
    
    updateChatbotUI(); 


    document.getElementById("nav-home").addEventListener("click", (e) => {
      e.preventDefault();
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // Tracking functionality is now part of the home page widget
    const trackingInput = document.getElementById('tracking-input'); // ID remains the same
    const trackButton = document.getElementById('track-button');     // ID remains the same
    const trackingResultsDiv = document.getElementById('tracking-results'); // ID remains the same

    
      const currentLang = html.lang; // html is document.documentElement

      if (trackingNumber) {
        trackingResultsDiv.style.display = 'block';
        let resultText = simulatedShipments[trackingNumber]?.[currentLang];

        if (!resultText) {
          resultText = currentLang === 'ar' ? 'عذرًا، لا توجد معلومات تتبع لهذا الرقم.' :
                       currentLang === 'en' ? 'Sorry, no tracking information found for this number.' :
                       '抱歉，此追踪号码未找到任何信息。';
        }
        trackingResultsDiv.textContent = resultText;
      } else {
        trackingResultsDiv.style.display = 'block';
        trackingResultsDiv.textContent = currentLang === 'ar' ? 'الرجاء إدخال رقم تتبع.' :
                                         currentLang === 'en' ? 'Please enter a tracking number.' :
                                         '请输入追踪号码。';
      }
    });
    
    // Update the global applyTranslation to handle the moved tracking elements if they are part of translation
    // The main applyTranslation function from the previous block is assumed to be defined before this.
    if (typeof applyTranslation === 'function') { 
        const originalPageApplyTranslation = applyTranslation; 
        window.applyTranslation = function(lang) { // Override global applyTranslation
            if (typeof originalPageApplyTranslation === 'function') { // Check if already wrapped
                 originalPageApplyTranslation(lang); 
            }
           
            updateChatbotUI(); // Update chatbot specific UI

            // Update tracking results text if visible (this part might be redundant if originalApplyTranslation already handles it)
            const currentTrackingNumber = trackingInput.value.trim();
            if (trackingResultsDiv.style.display === 'block') { // only update if visible
                if (currentTrackingNumber && simulatedShipments[currentTrackingNumber]) {
                    trackingResultsDiv.textContent = simulatedShipments[currentTrackingNumber][lang] || (lang === 'ar' ? 'عذرًا، لا توجد معلومات تتبع لهذا الرقم.' : lang === 'en' ? 'Sorry, no tracking information found for this number.' : '抱歉，此追踪号码未找到任何信息。');
                } else if (!currentTrackingNumber) {
                     trackingResultsDiv.textContent = lang === 'ar' ? 'الرجاء إدخال رقم تتبع.' :
                                                 lang === 'en' ? 'Please enter a tracking number.' :
                                                 '请输入追踪号码。';
                } else { // Tracking number entered but not found
                     trackingResultsDiv.textContent = lang === 'ar' ? 'عذرًا، لا توجد معلومات تتبع لهذا الرقم.' :
                                                 lang === 'en' ? 'Sorry, no tracking information found for this number.' :
                                                 '抱歉，此追踪号码未找到任何信息。';
                }
            }
        };
    }


  });
</script>
	</body>
</html>
